<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account | ZAYNAR</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&family=Mulish:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="img/logo.jpg" />
    <style>
        .account-container {
            position: relative; z-index: 2; background: var(--bg-panel); padding: 50px; width: 100%; max-width: 420px;
            border-radius: 16px; border: 1px solid var(--border-color); box-shadow: var(--shadow-card);
        }
        .form-control {
            width: 100%; padding: 16px; background: var(--bg-body); border: 1px solid var(--border-color);
            color: white; border-radius: 10px; margin-bottom: 20px; font-size: 1rem;
        }
        .form-control:focus { outline: none; border-color: var(--accent-gold); }
        .btn-full { width: 100%; padding: 16px; background: var(--accent-gold); color: #000; font-weight: 700; border: none; border-radius: 10px; cursor: pointer; font-size: 1.1rem; }
        .btn-full:hover { background: var(--accent-hover); }
        .toggle-text { text-align: center; margin-top: 25px; font-size: 0.95rem; }
        .toggle-text a { color: var(--accent-gold); cursor: pointer; text-decoration: underline; }
        #logout-btn { background: transparent; color: var(--text-secondary); font-size: 0.9rem; margin-top: 20px; }
    </style>
</head>
<body>

    <header id="main-header">
        <div class="header-inner">
            <nav class="desktop-nav">
                <a href="index.html" class="nav-link">Home</a>
                <a href="shop.html" class="nav-link">Collection</a>
                <a href="about.html" class="nav-link">Legacy</a>
                <a href="contact.html" class="nav-link">Contact</a>
            </nav>
            <a href="index.html" class="brand-logo">ZAYNAR</a>
            <div class="header-actions">
                <button id="theme-btn" class="icon-link"><i class="fa-solid fa-sun"></i></button>
                <a href="account.html" class="icon-link active"><i class="fa-regular fa-user"></i></a>
                <button id="cart-trigger" class="icon-link"><i class="fa-solid fa-bag-shopping"></i><span id="cart-count">0</span></button>
                <button id="menu-trigger" class="icon-link mobile-only"><i class="fa-solid fa-bars"></i></button>
            </div>
        </div>
    </header>

    <div id="mobile-menu"><div class="mm-links"><a href="index.html">Home</a><a href="shop.html">Collection</a><a href="about.html">Legacy</a><a href="contact.html">Contact</a><a href="account.html">Account</a></div></div>

    <main style="min-height: 100vh; display: flex; align-items: center; justify-content: center; background: url('img/a2.jpg') center/cover; position: relative;">
        <div class="overlay"></div>
        
        <div class="account-container fade-up">
            <!-- Logged Out: Show Login / Register -->
            <div id="auth-forms">
                <h2 style="text-align:center; margin-bottom:30px;" id="form-title">Member Access</h2>

                <div id="login-form">
                    <input type="email" id="login-email" class="form-control" placeholder="Email" required>
                    <input type="password" id="login-pass" class="form-control" placeholder="Password" required>
                    <button onclick="login()" class="btn-full">Sign In</button>
                </div>

                <div id="register-form" style="display:none;">
                    <input type="text" id="reg-name" class="form-control" placeholder="Full Name" required>
                    <input type="email" id="reg-email" class="form-control" placeholder="Email" required>
                    <input type="password" id="reg-pass" class="form-control" placeholder="Password (6+ chars)" required>
                    <input type="tel" id="reg-phone" class="form-control" placeholder="Phone (optional)">
                    <button onclick="register()" class="btn-full">Create Account</button>
                </div>

                <p class="toggle-text">
                    <span id="toggle-message">New here? <a onclick="toggleForm()">Create an account</a></span>
                </p>
            </div>

            <!-- Logged In: Show Welcome -->
            <div id="logged-in" style="display:none; text-align:center;">
                <i class="fa-solid fa-user-check" style="font-size:4rem; color:var(--accent-gold); margin-bottom:20px;"></i>
                <h2>Welcome back,<br><span id="user-name" style="color:var(--accent-gold);"></span>!</h2>
                <p style="margin:20px 0; color:var(--text-secondary);">You are logged in successfully.</p>
                <button onclick="logout()" id="logout-btn" class="btn-full" style="background:transparent; border:1px solid var(--accent-gold); color:var(--accent-gold);">
                    Logout
                </button>
            </div>
        </div>
    </main>

    <!-- Cart Drawer & Footer (same as before) -->
    <div id="cart-drawer"><div class="drawer-header"><h3>Shopping Bag</h3><button id="close-drawer"><i class="fa-solid fa-xmark"></i></button></div><div id="cart-items" class="drawer-content"></div><div class="drawer-footer"><div style="display:flex; justify-content:space-between;"><span>Total</span><span id="cart-total">$0.00</span></div><a href="checkout.html" class="btn btn-primary" style="width:100%; margin-top:20px;">Checkout</a></div></div>
    <div id="overlay"></div>

    <footer>
        <div class="container footer-grid">
            <div><div class="brand-logo">ZAYNAR</div><p>Timeless elegance.</p></div>
            <div class="footer-links"><h4>Shop</h4><a href="shop.html">All</a><a href="track-order.html">Track</a></div>
            <div class="footer-links"><h4>Support</h4><a href="contact.html">Contact</a><a href="faq.html">FAQ</a></div>
            <div class="footer-links"><h4>Social</h4><a href="#">Instagram</a></div>
        </div>
        <div class="footer-bottom">&copy; 2025 ZAYNAR.</div>
    </footer>

    <script src="script.js"></script>
    <script>
        // === ACCOUNT SYSTEM ===
        const currentUser = JSON.parse(localStorage.getItem('zaynarUser'));

        if (currentUser) {
            document.getElementById('auth-forms').style.display = 'none';
            document.getElementById('logged-in').style.display = 'block';
            document.getElementById('user-name').textContent = currentUser.name.split(' ')[0];
        }

        function toggleForm() {
            const login = document.getElementById('login-form');
            const register = document.getElementById('register-form');
            const title = document.getElementById('form-title');
            const msg = document.getElementById('toggle-message');

            if (login.style.display === 'none') {
                login.style.display = 'block';
                register.style.display = 'none';
                title.textContent = 'Member Access';
                msg.innerHTML = 'New here? <a onclick="toggleForm()">Create an account</a>';
            } else {
                login.style.display = 'none';
                register.style.display = 'block';
                title.textContent = 'Create Account';
                msg.innerHTML = 'Already have account? <a onclick="toggleForm()">Sign In</a>';
            }
        }

        function register() {
            const name = document.getElementById('reg-name').value.trim();
            const email = document.getElementById('reg-email').value.trim();
            const pass = document.getElementById('reg-pass').value;
            const phone = document.getElementById('reg-phone').value.trim();

            if (!name || !email || pass.length < 6) {
                alert('Please fill all fields correctly (Password 6+ chars)');
                return;
            }

            const user = { name, email, phone: phone || 'Not provided', registeredAt: new Date().toLocaleDateString() };
            localStorage.setItem('zaynarUser', JSON.stringify(user));
            localStorage.setItem('zaynarPass', btoa(pass)); // simple encode

            alert('Account created successfully!');
            location.reload();
        }

        function login() {
            const email = document.getElementById('login-email').value.trim();
            const pass = document.getElementById('login-pass').value;

            const savedUser = localStorage.getItem('zaynarUser');
            const savedPass = localStorage.getItem('zaynarPass');

            if (savedUser && savedPass && JSON.parse(savedUser).email === email && btoa(pass) === savedPass) {
                alert('Welcome back!');
                location.reload();
            } else {
                alert('Wrong email or password!');
            }
        }

        function logout() {
            localStorage.removeItem('zaynarUser');
            localStorage.removeItem('zaynarPass');
            alert('Logged out successfully');
            location.reload();
        }

        // Optional: Show user name in header everywhere
        document.addEventListener('DOMContentLoaded', () => {
            if (currentUser) {
                const userIcons = document.querySelectorAll('a[href="account.html"] i');
                userIcons.forEach(icon => icon.classList.replace('fa-regular', 'fa-solid'));
            }
            updateCartUI();
        });
    </script>
</body>
</html>